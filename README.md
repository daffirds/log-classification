
# System Logs Classification using Hybrid Methods (BERT + LLM)

This project utilizes BERT and LLM to classify system logs, addressing varying levels of complexity in log patterns. The hybrid classification approach ensures flexibility and effectiveness in processing predictable, complex, and poorly labeled data.

---

## Methods

1. **Explanatory Data Analysis (EDA)**:
    - Analyzed the dataset to determine which log entries are better classified using BERT or LLM.
    - Used **pandas** for data exploration and **DBSCAN** for clustering. 

2. **BERT + Logistic Regression**:
    - Applied to data with sufficient labeled training samples.
    - Utilizes embeddings generated by **BERT**, followed by **Logistic Regression** as the classification layer.

3. **LLM (Large Language Models)**:
    - Applied to data with insufficient labeled samples.
    - Used the `gpt-oss-20b` LLM model to label and classify log data.

![Flowchart](res/classif-flowchart.svg)

---

## Directory Structure

1. **`training/`**:
    - Contains the code for EDA and training models using BERT and Logistic Regression.

2. **`models/`**:
    - Stores the saved BERT + Logistic Regression models.

3. **`test/`**:
    - Contains test input and output files.

4. **`datasets/`**:
    - Contains raw and cleaned datasets

5. **Root Directory**:
   - Contains the FastAPI server code (`server.py`).

---

## Setup Instructions

1. **Clone the repository**
    ```bash
    git clone https://github.com/daffirds/log-classification.git
    cd log-classification
    ```

2. **Create and activate a virtual environment**

    ```bash
    python -m venv venv
    source venv/bin/activate      # macOS/Linux
    venv\Scripts\activate         # Windows
    ```

3. **Install dependencies**

    ```bash
    pip install -r requirements.txt
    ```

4. **Run the FastAPI Server**:
    To start the server, use the following command:

    ```bash
    uvicorn server:app --reload
    ```

   Once the server is running, you can access the API at:
   - `http://127.0.0.1:8000/docs` (Interactive Swagger documentation)
   - `http://127.0.0.1:8000/classify/` (Main endpoint)

---

## Usage

Upload a CSV file containing logs to the FastAPI endpoint for classification. Ensure the file has the following columns:
- `source`
- `log_message`

The output will be a CSV file with an additional column `target_label`, which represents the classified label for each log entry.

---

## Acknowledgment

This project is based on [Codebasic's Log Classification](https://github.com/codebasics/project-nlp-log-classification/tree/main), with improved BERT classification accuracy and the use of a different LLM.